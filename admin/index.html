<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SnugglePaw Admin</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
  <link rel="stylesheet" href="./css/admin.css" />
  <!-- Firebase App (the core Firebase SDK) must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <!-- Other Firebase services -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
  
  <!-- jQuery and Select2 -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  
  <!-- Firebase Config -->
  <script>
    // Make firebaseConfig available globally
    window.firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      databaseURL: "YOUR_DATABASE_URL",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
  </script>
  
  <!-- Initialize Firebase -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (window.firebaseConfig) {
        firebase.initializeApp(window.firebaseConfig);
        console.log('Firebase initialized successfully');
      } else {
        console.error('Firebase configuration not found');
      }
    });
  </script>
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <a class="brand" href="#"><i class="fa fa-paw"></i> Snuggle<span>Paw</span></a>
      <nav class="nav" id="sideNav">
        <a href="#" data-section="dashboard" class="active"><i class="fa fa-gauge"></i> Dashboard</a>
        <a href="#" data-section="users"><i class="fa fa-users"></i> Users</a>
        <a href="#" data-section="staff"><i class="fa fa-user-tie"></i> Staff</a>
        <a href="#" data-section="pets"><i class="fa fa-dog"></i> Pets</a>
        <a href="#" data-section="appointments"><i class="fa fa-calendar-check"></i> Appointments</a>
        <a href="#" data-section="services"><i class="fa fa-scissors"></i> Services</a>
        <a href="#" data-section="payments"><i class="fa fa-credit-card"></i> Payments</a>
        <a href="#" data-section="reviews"><i class="fa fa-star"></i> Reviews</a>
        <a href="#" data-section="reports"><i class="fa fa-chart-line"></i> Reports</a>
        <a href="#" data-section="content"><i class="fa fa-file-lines"></i> Announcements</a>
        <a href="#" data-section="settings"><i class="fa fa-gear"></i> Settings</a>
        <a href="#" id="signOutBtn"><i class="fa fa-right-from-bracket"></i> Sign out</a>
      </nav>
    </aside>

    <main>
      <div class="topbar">
        <div>
          <strong>Admin Panel</strong>
        </div>

        <!-- Cancellation Fee Modal -->
        <div id="cancelFeeModal" class="modal" aria-hidden="true">
          <div class="modal__dialog">
            <div class="modal__header">
              <h3>Cancel Appointment</h3>
              <button id="cancelFeeClose" class="icon-btn" aria-label="Close"><i class="fa fa-xmark"></i></button>
            </div>
            <div class="modal__body">
              <input type="hidden" id="cancelFeeApptId" />
              <p class="muted">Choose one of the options below. You may apply a cancellation fee or cancel without a fee.</p>
              <div class="grid2">
                <div>
                  <label for="cancelFeeAmount">Cancellation Fee (RM)</label>
                  <input id="cancelFeeAmount" class="input" type="number" min="0" step="0.01" placeholder="e.g. 25.00" />
                  <small class="muted">Leave empty or 0 to skip fee.</small>
                </div>
                <div></div>
              </div>
            </div>
            <div class="modal__footer">
              <button id="cancelNoFeeBtn" class="btn">Cancel without fee</button>
              <button id="applyFeeCancelBtn" class="btn primary"><i class="fa fa-receipt"></i> Apply fee & cancel</button>
            </div>
          </div>
        </div>
        <div class="actions">
          <span id="adminEmail" class="badge"><i class="fa fa-user-shield"></i> </span>
        </div>
      </div>

      <div class="content">
        <!-- Dashboard -->
        <section id="section-dashboard" class="section active">
          <h2>Overview</h2>
          <div class="cards">
            <div class="card">
              <h3>Total Appointments</h3>
              <div id="metric-appointments" class="big">0</div>
            </div>
            <div class="card">
              <h3>Active Users</h3>
              <div id="metric-users" class="big">0</div>
            </div>
            <div class="card">
              <h3>Upcoming Appointments</h3>
              <div id="metric-pending" class="big">0</div>
            </div>
          </div>
          <div class="card">
            <h3>Quick Links</h3>
            <div class="controls">
              <button class="btn" data-jump="appointments"><i class="fa fa-calendar-check"></i> Manage Appointments</button>
              <button class="btn" data-jump="users"><i class="fa fa-users"></i> Manage Users</button>
              <button class="btn" data-jump="services"><i class="fa fa-scissors"></i> Manage Services</button>
              <button class="btn" data-jump="payments"><i class="fa fa-credit-card"></i> View Payments</button>
            </div>
          </div>
        </section>

        <!-- Reviews -->
        <section id="section-reviews" class="section">
          <h2>Reviews</h2>
          <div class="controls">
            <select id="reviewServiceFilter" class="input">
              <option value="">All Services</option>
            </select>
            <select id="reviewRatingFilter" class="input">
              <option value="">All Ratings</option>
              <option value="5">5</option>
              <option value="4">4</option>
              <option value="3">3</option>
              <option value="2">2</option>
              <option value="1">1</option>
            </select>
          </div>
          <table class="table">
            <thead>
              <tr>
                <th>User</th>
                <th>Pet</th>
                <th>Service</th>
                <th>Rating</th>
                <th>Comment</th>
              </tr>
            </thead>
            <tbody id="reviewsTbody"></tbody>
          </table>
        </section>

        <!-- Review Respond Modal -->
        <div id="reviewModal" class="modal" aria-hidden="true">
          <div class="modal__dialog">
            <div class="modal__header">
              <h3>Respond to Review</h3>
              <button id="reviewModalClose" class="icon-btn" aria-label="Close"><i class="fa fa-xmark"></i></button>
            </div>
            <form id="reviewForm" class="modal__body">
              <input type="hidden" id="reviewId" />
              <div>
                <label for="reviewResponse">Response</label>
                <textarea id="reviewResponse" class="input" rows="4" placeholder="Write your response..."></textarea>
              </div>
              <div class="modal__footer">
                <button type="button" id="reviewCancel" class="btn">Cancel</button>
                <button type="submit" class="btn primary"><i class="fa fa-reply"></i> Send Response</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Staff -->
        <section id="section-staff" class="section">
          <h2>Staff Management</h2>
          <table class="table">
            <thead>
              <tr>
                <th>Full Name</th>
                <th>Phone</th>
                <th>Email</th>
                <th>Position</th>
                <th>Role</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="staffTbody"></tbody>
          </table>
        </section>

        <!-- Staff Modal -->
        <div id="staffModal" class="modal" aria-hidden="true">
          <div class="modal__dialog">
            <div class="modal__header">
              <h3 id="staffModalTitle">Add Staff</h3>
              <button id="staffModalClose" class="icon-btn" aria-label="Close"><i class="fa fa-xmark"></i></button>
            </div>
            <form id="staffForm" class="modal__body">
              <input type="hidden" id="staffId" />
              <div class="grid2">
                <div>
                  <label for="staffFullName">Full Name</label>
                  <input id="staffFullName" class="input" type="text" required />
                </div>
                <div>
                  <label for="staffPhone">Phone</label>
                  <input id="staffPhone" class="input" type="tel" required />
                </div>
              </div>
              <div class="grid2">
                <div>
                  <label for="staffEmail">Email</label>
                  <input id="staffEmail" class="input" type="email" required />
                </div>
                <div>
                  <label for="staffPosition">Position</label>
                  <select id="staffPosition" class="input" required>
                    <option value="Manager / Owner">Manager</option>
                    <option value="Pet Groomer">Pet Groomer</option>
                    <option value="Grooming Assistant / Bather">Grooming Assistant / Bather</option>
                    <option value="Pet Care Attendant">Pet Care Attendant</option>
                  </select>
                </div>
              </div>
              <div class="muted" style="margin-top:8px">Role: <span class="badge">admin</span></div>
              <div class="modal__footer">
                <button type="button" id="staffCancel" class="btn">Cancel</button>
                <button type="submit" id="staffSave" class="btn primary"><i class="fa fa-check"></i> Save</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Users -->
        <section id="section-users" class="section">
          <h2>Manage Users</h2>
          <div class="controls">
            <div class="search-box">
              <input id="userSearch" type="text" placeholder="Search by name or email" />
            </div>
            <select id="userStatus" class="filter-select">
              <option value="">All Status</option>
              <option value="active">Active</option>
              <option value="inactive">Inactive</option>
            </select>
            <button id="exportUsers" class="btn"><i class="fa fa-download"></i> Export CSV</button>
          </div>
          <table class="table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Status</th>
                <th>Role</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="usersTbody">
              <tr>
                <td colspan="6">Loading users...</td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- Pet Modal -->
        <div id="petModal" class="modal" aria-hidden="true">
          <div class="modal__dialog">
            <div class="modal__header">
              <h3 id="petModalTitle">Edit Pet</h3>
              <button id="petModalClose" class="icon-btn" aria-label="Close"><i class="fa fa-xmark"></i></button>
            </div>
            <form id="petForm" class="modal__body">
              <input type="hidden" id="petId" />
              <input type="hidden" id="petOwnerId" />
              <div class="grid2">
                <div>
                  <label for="petNameInput">Pet Name *</label>
                  <input id="petNameInput" class="input" type="text" required />
                </div>
                <div>
                  <label for="petTypeInput">Type *</label>
                  <select id="petTypeInput" class="input" required>
                    <option value="">Select type</option>
                    <option value="dog">Dog</option>
                    <option value="cat">Cat</option>
                  </select>
                </div>
              </div>
              <div class="grid2">
                <div>
                  <label for="petBreedInput">Breed *</label>
                  <input id="petBreedInput" class="input" type="text" required />
                </div>
                <div>
                  <label for="petColorInput">Color</label>
                  <input id="petColorInput" class="input" type="text" placeholder="e.g., Brown, Black, etc." />
                </div>
              </div>
              <div class="grid2">
                <div>
                  <label for="petAgeInput">Age (years)</label>
                  <input id="petAgeInput" class="input" type="number" min="0" step="0.5" placeholder="e.g., 2.5" />
                </div>
                <div>
                  <label for="petWeightInput">Weight (kg)</label>
                  <input id="petWeightInput" class="input" type="number" min="0" step="0.1" placeholder="e.g., 7.8" />
                </div>
              </div>
              <div class="grid2">
                <div>
                  <label for="petSizeInput">Size</label>
                  <select id="petSizeInput" class="input">
                    <option value="">Select size</option>
                    <option value="small">Small</option>
                    <option value="medium">Medium</option>
                    <option value="large">Large</option>
                  </select>
                </div>
                <div></div>
              </div>
              <div>
                <label for="petNotesInput">Special Notes</label>
                <textarea id="petNotesInput" class="input" rows="3" placeholder="Any allergies, special needs, or other important information"></textarea>
              </div>
              <div class="modal__footer">
                <button type="button" id="petCancel" class="btn">Cancel</button>
                <button type="submit" id="petSave" class="btn primary"><i class="fa fa-check"></i> Save</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Appointments -->
        <section id="section-appointments" class="section">
          <h2>Appointment Management</h2>
          <div class="controls">
            <select id="apptFilter" class="input">
              <option value="">All</option>
              <option value="upcoming">Upcoming</option>
              <option value="past">Past</option>
              <option value="cancelled">Cancelled</option>
            </select>
          </div>
          <table class="table">
            <thead>
              <tr><th>Pet</th><th>Service</th><th>Date</th><th>Time</th><th>Status</th><th>Actions</th></tr>
            </thead>
            <tbody id="apptsTbody"></tbody>
          </table>
        </section>

        <!-- Appointment Modal -->
        <div id="apptModal" class="modal" aria-hidden="true">
          <div class="modal__dialog">
            <div class="modal__header">
              <h3 id="apptModalTitle">Reschedule Appointment</h3>
              <button id="apptModalClose" class="icon-btn" aria-label="Close"><i class="fa fa-xmark"></i></button>
            </div>
            <form id="apptForm" class="modal__body">
              <input type="hidden" id="apptKey" />
              <div class="form-group">
                <label for="apptStaff">Assign To</label>
                <select id="apptStaff" class="form-control">
                  <option value="">-- Select Staff --</option>
                  <!-- Staff options will be populated by JavaScript -->
                </select>
              </div>
              <div class="grid2">
                <div>
                  <label for="apptDate">Date</label>
                  <input id="apptDate" class="input" type="date" required />
                </div>
                <div>
                  <label for="apptTime">Time</label>
                  <input id="apptTime" class="input" type="time" required />
                </div>
              </div>
              <div class="modal__footer">
                <button type="button" id="apptCancelBtn" class="btn">Cancel</button>
                <button type="submit" id="apptSaveBtn" class="btn primary"><i class="fa fa-check"></i> Save</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Services -->
        <section id="section-services" class="section">
          <h2>Services</h2>
          <div class="controls">
            <select id="serviceCategoryFilter" class="input">
              <option value="">All Categories</option>
              <option value="Grooming">Grooming</option>
              <option value="DayCare">DayCare</option>
              <option value="Boarding">Boarding</option>
            </select>
            <select id="serviceSpeciesFilter" class="input">
              <option value="">All Pets</option>
              <option value="dog">Dog</option>
              <option value="cat">Cat</option>
            </select>
            <button id="addServiceBtn" class="btn primary"><i class="fa fa-plus"></i> Add Service</button>
            <button id="addAdditionalServiceBtn" class="btn primary"><i class="fa fa-plus-circle"></i> Additional Service</button>
          </div>
          <table class="table">
            <thead>
              <tr><th>Name</th><th>Category</th><th>Pet Type</th><th>Price</th><th>Actions</th></tr>
            </thead>
            <tbody id="servicesTbody"></tbody>
          </table>
          
          <div class="section-divider">
            <h3>Additional Services</h3>
          </div>
          
          <div id="additionalServicesContainer" class="additional-services-grid">
            <!-- Additional services will be rendered here -->
          </div>
        </section>

        <!-- Service Modal -->
        <div id="serviceModal" class="modal" aria-hidden="true">
          <div class="modal__dialog">
            <div class="modal__header">
              <h3 id="serviceModalTitle">Add Service</h3>
              <button id="serviceModalClose" class="icon-btn" aria-label="Close"><i class="fa fa-xmark"></i></button>
            </div>
            <form id="serviceForm" class="modal__body">
              <input type="hidden" id="serviceId" />
              <div class="grid2">
                <div>
                  <label for="serviceName">Name</label>
                  <input id="serviceName" class="input" type="text" required />
                </div>
                <div>
                  <label for="serviceCategory">Category</label>
                  <select id="serviceCategory" class="input" required>
                    <option value="Grooming">Grooming</option>
                    <option value="DayCare">DayCare</option>
                    <option value="Boarding">Boarding</option>
                  </select>
                </div>
              </div>
              <!-- Category-specific controls -->
              <div id="serviceDaycareRow" class="grid2" style="display:none;">
                <div>
                  <label for="serviceDaycareType">DayCare Type</label>
                  <select id="serviceDaycareType" class="input">
                    <option value="HalfDay">Half Day</option>
                    <option value="FullDay">Full Day</option>
                  </select>
                </div>
                <div>
                  <small id="serviceDaycareHours" class="muted">Half Day: 10am–7pm or 5pm–10pm (same price). Full Day: 10am–10pm.</small>
                </div>
              </div>
              <div id="serviceDaycarePrices" class="grid2" style="display:none;">
                <div>
                  <label for="serviceDaycarePriceHalf">DayCare Price - Half Day (RM)</label>
                  <input id="serviceDaycarePriceHalf" class="input" type="number" step="0.01" min="0" placeholder="e.g. 30.00" />
                </div>
                <div>
                  <label for="serviceDaycarePriceFull">DayCare Price - Full Day (RM)</label>
                  <input id="serviceDaycarePriceFull" class="input" type="number" step="0.01" min="0" placeholder="e.g. 50.00" />
                </div>
              </div>
              <div id="serviceBoardingRow" class="grid2" style="display:none;">
                <div>
                  <label for="serviceBoardingPackage">Boarding Package</label>
                  <select id="serviceBoardingPackage" class="input">
                    <option value="3-Days">3-Days</option>
                    <option value="5-Days">5-Days</option>
                    <option value="7+-Days">7+ Days</option>
                  </select>
                </div>
                <div></div>
              </div>
              <div id="serviceBoardingPrices" class="grid2" style="display:none;">
                <div>
                  <label for="serviceBoardingPricePerNight">Price per Night (RM)</label>
                  <input id="serviceBoardingPricePerNight" class="input" type="number" step="0.01" min="0" placeholder="e.g. 60.00" />
                </div>
                <div>
                  <label for="serviceBoardingTotalPrice">Total Price (auto)</label>
                  <input id="serviceBoardingTotalPrice" class="input" type="number" step="0.01" min="0" readonly />
                </div>
              </div>
              <div class="grid2">
                <div>
                  <label for="serviceSpecies">Pet Type</label>
                  <select id="serviceSpecies" class="input" required>
                    <option value="dog">Dog</option>
                    <option value="cat">Cat</option>
                  </select>
                </div>
                <div id="serviceBasePriceRow">
                  <label for="servicePrice">Price (RM)</label>
                  <input id="servicePrice" class="input" type="number" step="0.01" min="0" required />
                </div>
              </div>
              <div id="serviceDogTierRow" class="grid2">
                <div>
                  <label for="servicePriceSmall">Dog Price - Small (RM)</label>
                  <input id="servicePriceSmall" class="input" type="number" step="0.01" min="0" placeholder="e.g. 45.00" />
                </div>
                <div>
                  <label for="servicePriceMedium">Dog Price - Medium (RM)</label>
                  <input id="servicePriceMedium" class="input" type="number" step="0.01" min="0" placeholder="e.g. 55.00" />
                </div>
              </div>
              <div id="serviceDogTierRow2" class="grid2">
                <div>
                  <label for="servicePriceLarge">Dog Price - Large (RM)</label>
                  <input id="servicePriceLarge" class="input" type="number" step="0.01" min="0" placeholder="e.g. 70.00" />
                </div>
                <div>
                  <small class="muted">If Species is Dog and size prices are filled, table will show the minimum (From) price.</small>
                </div>
              </div>
              <div id="serviceDurationRow" class="grid2">
                <div>
                  <label for="serviceDuration">Duration (mins)</label>
                  <input id="serviceDuration" class="input" type="number" step="1" min="0" />
                </div>
                <div></div>
              </div>
              <div>
                <label for="serviceDesc">Description</label>
                <textarea id="serviceDesc" class="input" rows="3" placeholder="Optional"></textarea>
              </div>
              <div class="modal__footer">
                <button type="button" id="serviceCancel" class="btn">Cancel</button>
                <button type="submit" id="serviceSave" class="btn primary"><i class="fa fa-check"></i> Save</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Additional Service Modal -->
        <div id="additionalServiceModal" class="modal" aria-hidden="true">
          <div class="modal__dialog">
            <div class="modal__header">
              <h3>Add Additional Service</h3>
              <button id="additionalServiceModalClose" class="icon-btn" aria-label="Close"><i class="fa fa-xmark"></i></button>
            </div>
            <form id="additionalServiceForm" class="modal__body">
              <input type="hidden" id="additionalServiceId" />
              <div class="grid2">
                <div>
                  <label for="additionalServiceName">Service Name</label>
                  <input id="additionalServiceName" class="input" type="text" required />
                </div>
                <div>
                  <label for="additionalServicePrice">Price (RM)</label>
                  <input id="additionalServicePrice" class="input" type="number" step="0.01" min="0" required />
                </div>
              </div>
              <div>
                <label for="additionalServiceDescription">Description (Optional)</label>
                <textarea id="additionalServiceDescription" class="input" rows="3" placeholder="e.g., Price per day, per session, etc."></textarea>
              </div>
              <div class="modal__footer">
                <button type="button" id="additionalServiceCancel" class="btn">Cancel</button>
                <button type="submit" class="btn primary"><i class="fa fa-plus"></i> Add Service</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Payments -->
        <section id="section-payments" class="section">
          <h2>Payments</h2>
          <div class="controls">
            <select id="payFilter" class="input">
              <option value="">All</option>
              <option value="paid">Paid</option>
              <option value="pending">Pending</option>
              <option value="refunded">Refunded</option>
            </select>
          </div>
          <table class="table">
            <thead>
              <tr><th>Booking</th><th>User</th><th>Amount</th><th>Status</th><th>Date</th><th>Actions</th></tr>
            </thead>
            <tbody id="paymentsTbody"></tbody>
          </table>
        </section>

        <!-- Reports -->
        <section id="section-reports" class="section">
          <h2>Reports & Analytics</h2>
          
          <!-- Date Range Filters -->
          <div class="card mb-20">
            <div class="controls">
              <div class="filter-group">
                <label>Date Range</label>
                <div class="date-range">
                  <input id="reportFrom" class="input" type="date" />
                  <span>to</span>
                  <input id="reportTo" class="input" type="date" />
                  <button id="filterReports" class="btn primary"><i class="fa fa-filter"></i> Apply Filter</button>
                </div>
              </div>
              <div class="export-buttons">
                <button id="exportBookings" class="btn"><i class="fa fa-file-csv"></i> Export Bookings</button>
                <button id="exportPayments" class="btn"><i class="fa fa-file-csv"></i> Export Payments</button>
              </div>
            </div>
          </div>

          <!-- Key Metrics -->
          <div class="cards">
            <div class="card metric-card">
              <div class="metric-icon"><i class="fa fa-calendar-check"></i></div>
              <div class="metric-content">
                <div class="metric-label">Total Bookings</div>
                <div id="metric-total-bookings" class="metric-value">0</div>
                <div class="metric-change">
                  <span class="positive">+12%</span> from last period
                </div>
              </div>
            </div>
            <div class="card metric-card">
              <div class="metric-icon"><i class="fa fa-check-circle"></i></div>
              <div class="metric-content">
                <div class="metric-label">Completed</div>
                <div id="metric-completed" class="metric-value">0</div>
                <div class="metric-change">
                  <span class="positive">+8%</span> from last period
                </div>
              </div>
            </div>
            <div class="card metric-card">
              <div class="metric-icon"><i class="fa fa-times-circle"></i></div>
              <div class="metric-content">
                <div class="metric-label">Cancellations</div>
                <div id="metric-cancellations" class="metric-value">0</div>
                <div class="metric-change">
                  <span class="negative">-3%</span> from last period
                </div>
              </div>
            </div>
            <div class="card metric-card">
              <div class="metric-icon"><i class="fa fa-coins"></i></div>
              <div class="metric-content">
                <div class="metric-label">Total Revenue</div>
                <div id="metric-total-revenue" class="metric-value">RM 0.00</div>
                <div class="metric-change">
                  <span class="positive">+15%</span> from last period
                </div>
              </div>
            </div>
          </div>

          <!-- Charts Row -->
          <div class="chart-row">
            <div class="card chart-card">
              <div class="chart-header">
                <h3>Revenue by Service</h3>
                <select class="chart-period-selector" id="revenuePeriod">
                  <option value="week">This Week</option>
                  <option value="month" selected>This Month</option>
                  <option value="year">This Year</option>
                </select>
              </div>
              <div class="chart-container">
                <canvas id="revenueChart"></canvas>
              </div>
            </div>
            <div class="card chart-card">
              <div class="chart-header">
                <h3>Top Services</h3>
                <select class="chart-period-selector" id="topServicesPeriod">
                  <option value="week">This Week</option>
                  <option value="month" selected>This Month</option>
                  <option value="year">This Year</option>
                </select>
              </div>
              <div class="chart-container">
                <canvas id="topServicesChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Staff Section -->
        <section id="section-staff" class="section">
          <h2>Staff Management</h2>
          <button id="addStaffBtn" class="btn btn-primary mb-20"><i class="fa fa-plus"></i> Add Staff</button>
          
          <!-- Staff List -->
          <div class="card">
            <div class="table-header">
              <h3>Staff Members</h3>
              <div class="table-actions">
                <input type="text" id="staffSearch" class="input search-input" placeholder="Search staff...">
              </div>
            </div>
            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Position</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="staffTbody">
                  <!-- Staff list will be populated here -->
                </tbody>
              </table>
            </div>
          </div>
        </section>

          <!-- Detailed Table -->
          <div class="card">
            <div class="table-header">
              <h3>Recent Appointments</h3>
              <div class="table-actions">
                <input type="text" id="appointmentSearch" class="input search-input" placeholder="Search appointments...">
                <button class="btn"><i class="fa fa-sync"></i> Refresh</button>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Service</th>
                    <th>Customer</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Status</th>
                    <th>Amount (MYR)</th>
                  </tr>
                </thead>
                <tbody id="appointmentsTableBody">
                  <!-- Will be populated by JavaScript -->
                </tbody>
              </table>
            </div>
            <div class="table-footer">
              <div class="table-summary">
                Showing <span id="showingCount">0</span> of <span id="totalCount">0</span> appointments
              </div>
              <div class="pagination">
                <button class="btn" id="prevPage" disabled><i class="fa fa-chevron-left"></i></button>
                <span id="pageInfo">Page 1</span>
                <button class="btn" id="nextPage" disabled><i class="fa fa-chevron-right"></i></button>
              </div>
            </div>
          </div>
        </section>


        <!-- Pets Section -->
        <section id="section-pets" class="section">
          <div class="section-header">
            <div>
              <h2>Manage Pets</h2>
              <p class="muted">View and manage all registered pets and their details.</p>
            </div>
            <div class="filters-row">
              <div class="search-box">
                <input type="text" id="petSearch" placeholder="Search by name, owner, or breed...">
              </div>
              <select id="petTypeFilter" class="filter-select">
                <option value="">All Types</option>
                <option value="dog">Dogs</option>
                <option value="cat">Cats</option>
              </select>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>Pet Name</th>
                  <th>Type</th>
                  <th>Breed</th>
                  <th>Owner</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="petsTbody">
                <tr>
                  <td colspan="5" class="no-data">
                    <i class="fa fa-spinner fa-spin"></i> Loading pets...
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- Content -->
        <section id="section-content" class="section">
          <h2>Announcements</h2>
          <div class="card">
            <h3>Post Announcement</h3>
            <textarea id="contentAnnouncement" class="input" rows="5" placeholder="e.g. We will be closed on Friday for maintenance."></textarea>
            <div class="modal__footer">
              <button id="saveAnnouncement" class="btn primary"><i class="fa fa-bullhorn"></i> Publish Announcement</button>
              <span id="dirtyAnnouncement" class="badge" style="display:none;">Unsaved</span>
            </div>
            <small class="muted">Publishing will also notify users in Messages.</small>
          </div>
        </section>

        <!-- Admin Profile -->
        <section id="section-settings" class="section">
          <h2>Admin Profile</h2>
          <div class="card">
            <div class="form-group">
              <label>Full Name</label>
              <input id="adminName" class="input" type="text" placeholder="Enter your full name">
            </div>
            
            <div class="form-group">
              <label>Phone Number</label>
              <input id="adminPhone" class="input" type="tel" placeholder="e.g. 0123456789">
            </div>
            
            <div class="form-group">
              <label>Role</label>
              <div class="readonly-field" id="adminRole">Loading...</div>
            </div>
            
            <div class="form-group">
              <label>Position</label>
              <div class="readonly-field" id="adminPosition">-</div>
            </div>
            
            <div class="form-group">
              <label>Last Login</label>
              <div class="readonly-field" id="adminLastLogin">-</div>
            </div>
            
            <div class="form-actions">
              <button id="saveAdminProfile" class="btn primary">
                <i class="fa fa-save"></i> Save Changes
              </button>
              <button id="adminResetPassword" class="btn">
                <i class="fa fa-key"></i> Reset Password
              </button>
              <span id="dirtyAdmin" class="badge" style="display:none;">
                <i class="fa fa-exclamation-circle"></i> Unsaved Changes
              </span>
            </div>
          </div>
        </section>
      </div>
    </main>

  <!-- Toasts Root -->
  <div id="toastRoot" class="toasts" aria-live="polite" aria-atomic="true"></div>

  <!-- User Details Modal -->
  <div id="userModal" class="modal" aria-hidden="true">
    <div class="modal__dialog">
      <div class="modal__header">
        <h3>User Details</h3>
        <button id="userModalClose" class="icon-btn" aria-label="Close">
          <i class="fa fa-xmark"></i>
        </button>
      </div>
      <div class="user-header">
        <h3 class="user-name" id="userNameVal">John Doe</h3>
        <p class="user-email" id="userEmailVal">john@example.com</p>
      </div>
      <div class="modal__body">
        <div class="user-details">
          <div class="detail-row">
            <span class="label"><i class="fa fa-phone"></i>Phone</span>
            <span id="userPhoneVal" class="value">+1 (555) 123-4567</span>
          </div>
          <div class="detail-row">
            <span class="label"><i class="fa fa-circle-check"></i>Status</span>
            <span id="userStatusVal" class="status active">Active</span>
          </div>
          <div class="detail-row">
            <span class="label"><i class="fa fa-shield"></i>Role</span>
            <span id="userRoleVal" class="role user">User</span>
          </div>
          <div class="detail-row">
            <span class="label"><i class="fa fa-calendar"></i>Member Since</span>
            <span id="userCreatedVal" class="value">Jan 15, 2023</span>
          </div>
        </div>
      </div>
      <div class="modal__footer">
        <button id="userCloseBtn" class="btn">Close</button>
      </div>
    </div>
  </div>

  <script type="module" src="./js/admin.js"></script>
  <script type="module" src="./js/reports.js"></script>
</body>
</html>